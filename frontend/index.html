<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Weather Dashboard</title>
<!--
    <link href="https://cdn.jsdelivr.net/npm/quasar@2.18.2/dist/quasar.prod.css" rel="stylesheet" type="text/css">

    <script src="https://cdn.jsdelivr.net/npm/vue@3.5.21/dist/vue.global.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/quasar@2.18.2/dist/quasar.umd.prod.js"></script>
  -->
    <link href="https://cdn.jsdelivr.net/npm/quasar@1.15.10/dist/quasar.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/quasar@1.15.10/dist/quasar.umd.min.js"></script>

</head>
<body>
    <div id="app" class="q-pa-md">
        <q-layout view="hHh lpR fFf">
            <q-header class="bg-secondary text-white">
                <q-toolbar>
                    <q-toolbar-title>Weather Dashboard</q-toolbar-title>
                </q-toolbar>
            </q-header>

            <q-page-container>
                <div class="row q-col-gutter-md">
                    <div class="col" v-for="(forecast, source) in data" :key="source">
                        <q-card>
                            <q-card-section>
                                <div class="text-h6">{{ source }}</div>
                                <div v-for="f in forecast" :key="f.date" class="q-mt-sm">
                                    <strong> {{ f.date }} </strong><br>
                                    {{ f.temperature }} ºC <br>
                                    {{ f.description}}
                                    <q-separator class="q-my-sm"></q-separator>
                                </div>
                            </q-card-section>
                        </q-card>
                    </div>
                </div>
            </q-page-container>
        </q-layout>
    </div>
  <script>
    new Vue({
      el: '#app',
      data: {
        data: {}  // Aqui vão ficar os dados das 3 APIs
      },
      mounted() {
        // Chamada ao backend
        fetch('http://127.0.0.1:5000/api/forecast')
          .then(res => res.json())
          .then(json => {
            this.data = json;
          })
          .catch(err => {
            console.error("Erro ao carregar dados:", err);
          });
      }
    });
  </script>
</body>
</html>